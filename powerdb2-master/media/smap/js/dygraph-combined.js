DygraphLayout=function(b,a){this.dygraph_=b;this.options={};Dygraph.update(this.options,a?a:{});this.datasets=new Array();this.annotations=new Array()};DygraphLayout.prototype.attr_=function(a){return this.dygraph_.attr_(a)};DygraphLayout.prototype.addDataset=function(a,b){this.datasets[a]=b};DygraphLayout.prototype.setAnnotations=function(d){this.annotations=[];var e=this.attr_("xValueParser");for(var c=0;c<d.length;c++){var b={};if(!d[c].xval&&!d[c].x){this.dygraph_.error("Annotations must have an 'x' property");return}if(d[c].icon&&!(d[c].hasOwnProperty("width")&&d[c].hasOwnProperty("height"))){this.dygraph_.error("Must set width and height when setting annotation.icon property");return}Dygraph.update(b,d[c]);if(!b.xval){b.xval=e(b.x)}this.annotations.push(b)}};DygraphLayout.prototype.evaluate=function(){this._evaluateLimits();this._evaluateLineCharts();this._evaluateLineTicks();this._evaluateAnnotations()};DygraphLayout.prototype._evaluateLimits=function(){this.minxval=this.maxxval=null;if(this.options.dateWindow){this.minxval=this.options.dateWindow[0];this.maxxval=this.options.dateWindow[1]}else{for(var d in this.datasets){if(!this.datasets.hasOwnProperty(d)){continue}var c=this.datasets[d];if(c.length>1){var b=c[0][0];if(!this.minxval||b<this.minxval){this.minxval=b}var a=c[c.length-1][0];if(!this.maxxval||a>this.maxxval){this.maxxval=a}}}}this.xrange=this.maxxval-this.minxval;this.xscale=(this.xrange!=0?1/this.xrange:1);for(var e=0;e<this.options.yAxes.length;e++){var f=this.options.yAxes[e];f.minyval=f.computedValueRange[0];f.maxyval=f.computedValueRange[1];f.yrange=f.maxyval-f.minyval;f.yscale=(f.yrange!=0?1/f.yrange:1)}};DygraphLayout.prototype._evaluateLineCharts=function(){this.points=new Array();for(var f in this.datasets){if(!this.datasets.hasOwnProperty(f)){continue}var e=this.datasets[f];var c=this.options.yAxes[this.options.seriesToAxisMap[f]];for(var b=0;b<e.length;b++){var d=e[b];var a={x:((parseFloat(d[0])-this.minxval)*this.xscale),y:1-((parseFloat(d[1])-c.minyval)*c.yscale),xval:parseFloat(d[0]),yval:parseFloat(d[1]),name:f};this.points.push(a)}}};DygraphLayout.prototype._evaluateLineTicks=function(){this.xticks=new Array();for(var d=0;d<this.options.xTicks.length;d++){var c=this.options.xTicks[d];var b=c.label;var f=this.xscale*(c.v-this.minxval);if((f>=0)&&(f<=1)){this.xticks.push([f,b])}}this.yticks=new Array();for(var d=0;d<this.options.yAxes.length;d++){var e=this.options.yAxes[d];for(var a=0;a<e.ticks.length;a++){var c=e.ticks[a];var b=c.label;var f=1-(e.yscale*(c.v-e.minyval));if((f>=0)&&(f<=1)){this.yticks.push([d,f,b])}}}};DygraphLayout.prototype.evaluateWithError=function(){this.evaluate();if(!this.options.errorBars){return}var d=0;for(var g in this.datasets){if(!this.datasets.hasOwnProperty(g)){continue}var c=0;var f=this.datasets[g];for(var c=0;c<f.length;c++,d++){var e=f[c];var a=parseFloat(e[0]);var b=parseFloat(e[1]);if(a==this.points[d].xval&&b==this.points[d].yval){this.points[d].errorMinus=parseFloat(e[2]);this.points[d].errorPlus=parseFloat(e[3])}}}};DygraphLayout.prototype._evaluateAnnotations=function(){var f={};for(var d=0;d<this.annotations.length;d++){var b=this.annotations[d];f[b.xval+","+b.series]=b}this.annotated_points=[];for(var d=0;d<this.points.length;d++){var e=this.points[d];var c=e.xval+","+e.name;if(c in f){e.annotation=f[c];this.annotated_points.push(e)}}};DygraphLayout.prototype.removeAllDatasets=function(){delete this.datasets;this.datasets=new Array()};DygraphLayout.prototype.updateOptions=function(a){Dygraph.update(this.options,a?a:{})};DygraphLayout.prototype.unstackPointAtIndex=function(b){var a=this.points[b];var c={};for(var d in a){c[d]=a[d]}if(!this.attr_("stackedGraph")){return c}for(var d=b+1;d<this.points.length;d++){if(this.points[d].xval==a.xval){c.yval-=this.points[d].yval;break}}return c};DygraphCanvasRenderer=function(e,c,b,d){this.dygraph_=e;this.options={strokeWidth:0.5,drawXAxis:true,drawYAxis:true,axisLineColor:"black",axisLineWidth:0.5,axisTickSize:3,axisLabelColor:"black",axisLabelFont:"Arial",axisLabelFontSize:9,axisLabelWidth:50,drawYGrid:true,drawXGrid:true,gridLineColor:"rgb(128,128,128)",fillAlpha:0.15,underlayCallback:null};Dygraph.update(this.options,d);this.layout=b;this.element=c;this.container=this.element.parentNode;this.height=this.element.height;this.width=this.element.width;if(!this.isIE&&!(DygraphCanvasRenderer.isSupported(this.element))){throw"Canvas is not supported."}this.xlabels=new Array();this.ylabels=new Array();this.annotations=new Array();this.area={x:this.options.yAxisLabelWidth+2*this.options.axisTickSize,y:0};this.area.w=this.width-this.area.x-this.options.rightGap;this.area.h=this.height-this.options.axisLabelFontSize-2*this.options.axisTickSize;if(this.dygraph_.numAxes()==2){this.area.w-=(this.options.yAxisLabelWidth+2*this.options.axisTickSize)}else{if(this.dygraph_.numAxes()>2){this.dygraph_.error("Only two y-axes are supported at this time. (Trying to use "+this.dygraph_.numAxes()+")")}}this.container.style.position="relative";this.container.style.width=this.width+"px";var a=this.dygraph_.canvas_.getContext("2d");a.beginPath();a.rect(this.area.x,this.area.y,this.area.w,this.area.h);a.clip();a=this.dygraph_.hidden_.getContext("2d");a.beginPath();a.rect(this.area.x,this.area.y,this.area.w,this.area.h);a.clip()};DygraphCanvasRenderer.prototype.attr_=function(a){return this.dygraph_.attr_(a)};DygraphCanvasRenderer.prototype.clear=function(){if(this.isIE){try{if(this.clearDelay){this.clearDelay.cancel();this.clearDelay=null}var b=this.element.getContext("2d")}catch(d){this.clearDelay=MochiKit.Async.wait(this.IEDelay);this.clearDelay.addCallback(bind(this.clear,this));return}}var b=this.element.getContext("2d");b.clearRect(0,0,this.width,this.height);for(var a=0;a<this.xlabels.length;a++){var c=this.xlabels[a];if(c.parentNode){c.parentNode.removeChild(c)}}for(var a=0;a<this.ylabels.length;a++){var c=this.ylabels[a];if(c.parentNode){c.parentNode.removeChild(c)}}for(var a=0;a<this.annotations.length;a++){var c=this.annotations[a];if(c.parentNode){c.parentNode.removeChild(c)}}this.xlabels=new Array();this.ylabels=new Array();this.annotations=new Array()};DygraphCanvasRenderer.isSupported=function(g){var c=null;try{if(typeof(g)=="undefined"||g==null){c=document.createElement("canvas")}else{c=g}var b=c.getContext("2d")}catch(d){var f=navigator.appVersion.match(/MSIE (\d\.\d)/);var a=(navigator.userAgent.toLowerCase().indexOf("opera")!=-1);if((!f)||(f[1]<6)||(a)){return false}return true}return true};DygraphCanvasRenderer.prototype.render=function(){var b=this.element.getContext("2d");function d(h){return Math.round(h)+0.5}function f(h){return Math.round(h)-0.5}if(this.options.underlayCallback){this.options.underlayCallback(b,this.area,this.dygraph_,this.dygraph_)}if(this.options.drawYGrid){var e=this.layout.yticks;b.save();b.strokeStyle=this.options.gridLineColor;b.lineWidth=this.options.axisLineWidth;for(var c=0;c<e.length;c++){if(e[c][0]!=0){continue}var a=d(this.area.x);var g=f(this.area.y+e[c][1]*this.area.h);b.beginPath();b.moveTo(a,g);b.lineTo(a+this.area.w,g);b.closePath();b.stroke()}}if(this.options.drawXGrid){var e=this.layout.xticks;b.save();b.strokeStyle=this.options.gridLineColor;b.lineWidth=this.options.axisLineWidth;for(var c=0;c<e.length;c++){var a=d(this.area.x+e[c][0]*this.area.w);var g=f(this.area.y+this.area.h);b.beginPath();b.moveTo(a,g);b.lineTo(a,this.area.y);b.closePath();b.stroke()}}this._renderLineChart();this._renderAxis();this._renderAnnotations()};DygraphCanvasRenderer.prototype._renderAxis=function(){if(!this.options.drawXAxis&&!this.options.drawYAxis){return}function k(i){return Math.round(i)+0.5}function g(i){return Math.round(i)-0.5}var a=this.element.getContext("2d");var b={position:"absolute",fontSize:this.options.axisLabelFontSize+"px",color:this.options.axisLabelColor,width:this.options.axisLabelWidth+"px",overflow:"hidden"};var e=function(i){var s=document.createElement("div");for(var r in b){if(b.hasOwnProperty(r)){s.style[r]=b[r]}}s.appendChild(document.createTextNode(i));return s};a.save();a.strokeStyle=this.options.axisLineColor;a.lineWidth=this.options.axisLineWidth;if(this.options.drawYAxis){if(this.layout.yticks&&this.layout.yticks.length>0){for(var f=0;f<this.layout.yticks.length;f++){var h=this.layout.yticks[f];if(typeof(h)=="function"){return}var o=this.area.x;var d=1;if(h[0]==1){o=this.area.x+this.area.w;d=-1}var m=this.area.y+h[1]*this.area.h;a.beginPath();a.moveTo(k(o),g(m));a.lineTo(k(o-d*this.options.axisTickSize),g(m));a.closePath();a.stroke();var n=e(h[2]);var l=(m-this.options.axisLabelFontSize/2);if(l<0){l=0}if(l+this.options.axisLabelFontSize+3>this.height){n.style.bottom="0px"}else{n.style.top=l+"px"}if(h[0]==0){n.style.left="0px";n.style.textAlign="right"}else{if(h[0]==1){n.style.left=(this.area.x+this.area.w+this.options.axisTickSize)+"px";n.style.textAlign="left"}}n.style.width=this.options.yAxisLabelWidth+"px";this.container.appendChild(n);this.ylabels.push(n)}var p=this.ylabels[0];var q=this.options.axisLabelFontSize;var j=parseInt(p.style.top)+q;if(j>this.height-q){p.style.top=(parseInt(p.style.top)-q/2)+"px"}}a.beginPath();a.moveTo(k(this.area.x),g(this.area.y));a.lineTo(k(this.area.x),g(this.area.y+this.area.h));a.closePath();a.stroke();if(this.dygraph_.numAxes()==2){a.beginPath();a.moveTo(g(this.area.x+this.area.w),g(this.area.y));a.lineTo(g(this.area.x+this.area.w),g(this.area.y+this.area.h));a.closePath();a.stroke()}}if(this.options.drawXAxis){if(this.layout.xticks){for(var f=0;f<this.layout.xticks.length;f++){var h=this.layout.xticks[f];if(typeof(dataset)=="function"){return}var o=this.area.x+h[0]*this.area.w;var m=this.area.y+this.area.h;a.beginPath();a.moveTo(k(o),g(m));a.lineTo(k(o),g(m+this.options.axisTickSize));a.closePath();a.stroke();var n=e(h[1]);n.style.textAlign="center";n.style.bottom="0px";var c=(o-this.options.axisLabelWidth/2);if(c+this.options.axisLabelWidth>this.width){c=this.width-this.options.xAxisLabelWidth;n.style.textAlign="right"}if(c<0){c=0;n.style.textAlign="left"}n.style.left=c+"px";n.style.width=this.options.xAxisLabelWidth+"px";this.container.appendChild(n);this.xlabels.push(n)}}a.beginPath();a.moveTo(k(this.area.x),g(this.area.y+this.area.h));a.lineTo(k(this.area.x+this.area.w),g(this.area.y+this.area.h));a.closePath();a.stroke()}a.restore()};DygraphCanvasRenderer.prototype._renderAnnotations=function(){var j={position:"absolute",fontSize:this.options.axisLabelFontSize+"px",zIndex:10,overflow:"hidden"};var f=function(q,i,r,a){return function(s){var p=r.annotation;if(p.hasOwnProperty(q)){p[q](p,r,a.dygraph_,s)}else{if(a.dygraph_.attr_(i)){a.dygraph_.attr_(i)(p,r,a.dygraph_,s)}}}};var m=this.layout.annotated_points;for(var h=0;h<m.length;h++){var e=m[h];if(e.canvasx<this.area.x||e.canvasx>this.area.x+this.area.w){continue}var k=e.annotation;var n=6;if(k.hasOwnProperty("tickHeight")){n=k.tickHeight}var c=document.createElement("div");for(var b in j){if(j.hasOwnProperty(b)){c.style[b]=j[b]}}if(!k.hasOwnProperty("icon")){c.className="dygraphDefaultAnnotation"}if(k.hasOwnProperty("cssClass")){c.className+=" "+k.cssClass}var d=k.hasOwnProperty("width")?k.width:16;var l=k.hasOwnProperty("height")?k.height:16;if(k.hasOwnProperty("icon")){var g=document.createElement("img");g.src=k.icon;g.width=d;g.height=l;c.appendChild(g)}else{if(e.annotation.hasOwnProperty("shortText")){c.appendChild(document.createTextNode(e.annotation.shortText))}}c.style.left=(e.canvasx-d/2)+"px";if(k.attachAtBottom){c.style.top=(this.area.h-l-n)+"px"}else{c.style.top=(e.canvasy-l-n)+"px"}c.style.width=d+"px";c.style.height=l+"px";c.title=e.annotation.text;c.style.color=this.colors[e.name];c.style.borderColor=this.colors[e.name];k.div=c;Dygraph.addEvent(c,"click",f("clickHandler","annotationClickHandler",e,this));Dygraph.addEvent(c,"mouseover",f("mouseOverHandler","annotationMouseOverHandler",e,this));Dygraph.addEvent(c,"mouseout",f("mouseOutHandler","annotationMouseOutHandler",e,this));Dygraph.addEvent(c,"dblclick",f("dblClickHandler","annotationDblClickHandler",e,this));this.container.appendChild(c);this.annotations.push(c);var o=this.element.getContext("2d");o.strokeStyle=this.colors[e.name];o.beginPath();if(!k.attachAtBottom){o.moveTo(e.canvasx,e.canvasy);o.lineTo(e.canvasx,e.canvasy-2-n)}else{o.moveTo(e.canvasx,this.area.h);o.lineTo(e.canvasx,this.area.h-2-n)}o.closePath();o.stroke()}};DygraphCanvasRenderer.prototype._renderLineChart=function(){var d=this.element.getContext("2d");var g=this.options.colorScheme.length;var p=this.options.colorScheme;var C=this.options.fillAlpha;var F=this.layout.options.errorBars;var E=this.attr_("fillGraph");var m=this.layout.options.stackedGraph;var n=this.layout.options.stepPlot;var H=[];for(var I in this.layout.datasets){if(this.layout.datasets.hasOwnProperty(I)){H.push(I)}}var z=H.length;this.colors={};for(var A=0;A<z;A++){this.colors[H[A]]=p[A%g]}for(var A=0;A<this.layout.points.length;A++){var v=this.layout.points[A];v.canvasx=this.area.w*v.x+this.area.x;v.canvasy=this.area.h*v.y+this.area.y}var q=function(i){return i&&!isNaN(i)};var w=d;if(F){if(E){this.dygraph_.warn("Can't use fillGraph option with error bars")}for(var A=0;A<z;A++){var k=H[A];var e=this.layout.options.yAxes[this.layout.options.seriesToAxisMap[k]];var x=this.colors[k];w.save();var h=NaN;var f=NaN;var l=[-1,-1];var u=e.yscale;var a=new RGBColor(x);var r="rgba("+a.r+","+a.g+","+a.b+","+C+")";w.fillStyle=r;w.beginPath();for(var y=0;y<this.layout.points.length;y++){var v=this.layout.points[y];if(v.name==k){if(!q(v.y)){h=NaN;continue}if(n){var s=[f-v.errorPlus*u,f+v.errorMinus*u];f=v.y}else{var s=[v.y-v.errorPlus*u,v.y+v.errorMinus*u]}s[0]=this.area.h*s[0]+this.area.y;s[1]=this.area.h*s[1]+this.area.y;if(!isNaN(h)){if(n){w.moveTo(h,s[0])}else{w.moveTo(h,l[0])}w.lineTo(v.canvasx,s[0]);w.lineTo(v.canvasx,s[1]);if(n){w.lineTo(h,s[1])}else{w.lineTo(h,l[1])}w.closePath()}l=s;h=v.canvasx}}w.fill()}}else{if(E){var G=[];for(var A=z-1;A>=0;A--){var k=H[A];var x=this.colors[k];var e=this.layout.options.yAxes[this.layout.options.seriesToAxisMap[k]];var b=1+e.minyval*e.yscale;if(b<0){b=0}else{if(b>1){b=1}}b=this.area.h*b+this.area.y;w.save();var h=NaN;var l=[-1,-1];var u=e.yscale;var a=new RGBColor(x);var r="rgba("+a.r+","+a.g+","+a.b+","+C+")";w.fillStyle=r;w.beginPath();for(var y=0;y<this.layout.points.length;y++){var v=this.layout.points[y];if(v.name==k){if(!q(v.y)){h=NaN;continue}var s;if(m){lastY=G[v.canvasx];if(lastY===undefined){lastY=b}G[v.canvasx]=v.canvasy;s=[v.canvasy,lastY]}else{s=[v.canvasy,b]}if(!isNaN(h)){w.moveTo(h,l[0]);if(n){w.lineTo(v.canvasx,l[0])}else{w.lineTo(v.canvasx,s[0])}w.lineTo(v.canvasx,s[1]);w.lineTo(h,l[1]);w.closePath()}l=s;h=v.canvasx}}w.fill()}}}for(var A=0;A<z;A++){var k=H[A];var x=this.colors[k];var t=this.dygraph_.attr_("strokeWidth",k);d.save();var v=this.layout.points[0];var o=this.dygraph_.attr_("pointSize",k);var h=null,f=null;var D=this.dygraph_.attr_("drawPoints",k);var B=this.layout.points;for(var y=0;y<B.length;y++){var v=B[y];if(v.name==k){if(!q(v.canvasy)){if(n&&h!=null){w.beginPath();w.strokeStyle=x;w.lineWidth=this.options.strokeWidth;w.moveTo(h,f);w.lineTo(v.canvasx,f);w.stroke()}h=f=null}else{var c=(!h&&(y==B.length-1||!q(B[y+1].canvasy)));if(!h){h=v.canvasx;f=v.canvasy}else{if(t){w.beginPath();w.strokeStyle=x;w.lineWidth=t;w.moveTo(h,f);if(n){w.lineTo(v.canvasx,f)}h=v.canvasx;f=v.canvasy;w.lineTo(h,f);w.stroke()}}if(D||c){w.beginPath();w.fillStyle=x;w.arc(v.canvasx,v.canvasy,o,0,2*Math.PI,false);w.fill()}}}}}d.restore()};Dygraph=function(c,b,a){if(arguments.length>0){if(arguments.length==4){this.warn("Using deprecated four-argument dygraph constructor");this.__old_init__(c,b,arguments[2],arguments[3])}else{this.__init__(c,b,a)}}};Dygraph.NAME="Dygraph";Dygraph.VERSION="1.2";Dygraph.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"};Dygraph.toString=function(){return this.__repr__()};Dygraph.DEFAULT_ROLL_PERIOD=1;Dygraph.DEFAULT_WIDTH=480;Dygraph.DEFAULT_HEIGHT=320;Dygraph.AXIS_LINE_WIDTH=0.3;Dygraph.DEFAULT_ATTRS={highlightCircleSize:3,pixelsPerXLabel:60,pixelsPerYLabel:30,labelsDivWidth:250,labelsDivStyles:{},labelsSeparateLines:false,labelsShowZeroValues:true,labelsKMB:false,labelsKMG2:false,showLabelsOnHighlight:true,yValueFormatter:function(a){return Dygraph.round_(a,2)},strokeWidth:1,axisTickSize:3,axisLabelFontSize:14,xAxisLabelWidth:50,yAxisLabelWidth:50,xAxisLabelFormatter:Dygraph.dateAxisFormatter,rightGap:5,showRoller:false,xValueFormatter:Dygraph.dateString_,xValueParser:Dygraph.dateParser,xTicker:Dygraph.dateTicker,delimiter:",",logScale:false,sigma:2,errorBars:false,fractions:false,wilsonInterval:true,customBars:false,fillGraph:false,fillAlpha:0.15,connectSeparatedPoints:false,stackedGraph:false,hideOverlayOnMouseOut:true,stepPlot:false,avoidMinZero:false,interactionModel:null};Dygraph.DEBUG=1;Dygraph.INFO=2;Dygraph.WARNING=3;Dygraph.ERROR=3;Dygraph.HORIZONTAL=1;Dygraph.VERTICAL=2;Dygraph.addedAnnotationCSS=false;Dygraph.prototype.__old_init__=function(f,d,e,b){if(e!=null){var a=["Date"];for(var c=0;c<e.length;c++){a.push(e[c])}Dygraph.update(b,{labels:a})}this.__init__(f,d,b)};Dygraph.prototype.__init__=function(d,c,b){if(/MSIE/.test(navigator.userAgent)&&!window.opera&&typeof(G_vmlCanvasManager)!="undefined"&&document.readyState!="complete"){var a=this;setTimeout(function(){a.__init__(d,c,b)},100)}if(b==null){b={}}this.maindiv_=d;this.file_=c;this.rollPeriod_=b.rollPeriod||Dygraph.DEFAULT_ROLL_PERIOD;this.previousVerticalX_=-1;this.fractions_=b.fractions||false;this.dateWindow_=b.dateWindow||null;this.wilsonInterval_=b.wilsonInterval||true;this.is_initial_draw_=true;this.annotations_=[];d.innerHTML="";if(d.style.width==""){d.style.width=(b.width||Dygraph.DEFAULT_WIDTH)+"px"}if(d.style.height==""){d.style.height=(b.height||Dygraph.DEFAULT_HEIGHT)+"px"}this.width_=parseInt(d.style.width,10);this.height_=parseInt(d.style.height,10);if(d.style.width.indexOf("%")==d.style.width.length-1){this.width_=d.offsetWidth}if(d.style.height.indexOf("%")==d.style.height.length-1){this.height_=d.offsetHeight}if(this.width_==0){this.error("dygraph has zero width. Please specify a width in pixels.")}if(this.height_==0){this.error("dygraph has zero height. Please specify a height in pixels.")}if(b.stackedGraph){b.fillGraph=true}this.user_attrs_={};Dygraph.update(this.user_attrs_,b);this.attrs_={};Dygraph.update(this.attrs_,Dygraph.DEFAULT_ATTRS);this.boundaryIds_=[];this.labelsFromCSV_=(this.attr_("labels")==null);this.createInterface_();this.start_()};Dygraph.prototype.attr_=function(a,b){if(b&&typeof(this.user_attrs_[b])!="undefined"&&this.user_attrs_[b]!=null&&typeof(this.user_attrs_[b][a])!="undefined"){return this.user_attrs_[b][a]}else{if(typeof(this.user_attrs_[a])!="undefined"){return this.user_attrs_[a]}else{if(typeof(this.attrs_[a])!="undefined"){return this.attrs_[a]}else{return null}}}};Dygraph.prototype.log=function(a,b){if(typeof(console)!="undefined"){switch(a){case Dygraph.DEBUG:console.debug("dygraphs: "+b);break;case Dygraph.INFO:console.info("dygraphs: "+b);break;case Dygraph.WARNING:console.warn("dygraphs: "+b);break;case Dygraph.ERROR:console.error("dygraphs: "+b);break}}};Dygraph.prototype.info=function(a){this.log(Dygraph.INFO,a)};Dygraph.prototype.warn=function(a){this.log(Dygraph.WARNING,a)};Dygraph.prototype.error=function(a){this.log(Dygraph.ERROR,a)};Dygraph.prototype.rollPeriod=function(){return this.rollPeriod_};Dygraph.prototype.xAxisRange=function(){if(this.dateWindow_){return this.dateWindow_}var b=this.rawData_[0][0];var a=this.rawData_[this.rawData_.length-1][0];return[b,a]};Dygraph.prototype.yAxisRange=function(a){if(typeof(a)=="undefined"){a=0}if(a<0||a>=this.axes_.length){return null}return[this.axes_[a].computedValueRange[0],this.axes_[a].computedValueRange[1]]};Dygraph.prototype.yAxisRanges=function(){var a=[];for(var b=0;b<this.axes_.length;b++){a.push(this.yAxisRange(b))}return a};Dygraph.prototype.toDomCoords=function(a,g,c){var b=[null,null];var d=this.plotter_.area;if(a!==null){var e=this.xAxisRange();b[0]=d.x+(a-e[0])/(e[1]-e[0])*d.w}if(g!==null){var f=this.yAxisRange(c);b[1]=d.y+(f[1]-g)/(f[1]-f[0])*d.h}return b};Dygraph.prototype.toDataCoords=function(a,g,c){var b=[null,null];var d=this.plotter_.area;if(a!==null){var e=this.xAxisRange();b[0]=e[0]+(a-d.x)/d.w*(e[1]-e[0])}if(g!==null){var f=this.yAxisRange(c);b[1]=f[0]+(d.h-g)/d.h*(f[1]-f[0])}return b};Dygraph.prototype.numColumns=function(){return this.rawData_[0].length};Dygraph.prototype.numRows=function(){return this.rawData_.length};Dygraph.prototype.getValue=function(b,a){if(b<0||b>this.rawData_.length){return null}if(a<0||a>this.rawData_[b].length){return null}return this.rawData_[b][a]};Dygraph.addEvent=function(c,a,b){var d=function(f){if(!f){var f=window.event}b(f)};if(window.addEventListener){c.addEventListener(a,d,false)}else{c.attachEvent("on"+a,d)}};Dygraph.cancelEvent=function(a){a=a?a:window.event;if(a.stopPropagation){a.stopPropagation()}if(a.preventDefault){a.preventDefault()}a.cancelBubble=true;a.cancel=true;a.returnValue=false;return false};Dygraph.prototype.createInterface_=function(){var a=this.maindiv_;this.graphDiv=document.createElement("div");this.graphDiv.style.width=this.width_+"px";this.graphDiv.style.height=this.height_+"px";a.appendChild(this.graphDiv);this.canvas_=Dygraph.createCanvas();this.canvas_.style.position="absolute";this.canvas_.width=this.width_;this.canvas_.height=this.height_;this.canvas_.style.width=this.width_+"px";this.canvas_.style.height=this.height_+"px";this.hidden_=this.createPlotKitCanvas_(this.canvas_);this.graphDiv.appendChild(this.hidden_);this.graphDiv.appendChild(this.canvas_);this.mouseEventElement_=this.canvas_;var b=this;Dygraph.addEvent(this.mouseEventElement_,"mousemove",function(c){b.mouseMove_(c)});Dygraph.addEvent(this.mouseEventElement_,"mouseout",function(c){b.mouseOut_(c)});this.layoutOptions_={xOriginIsZero:false};Dygraph.update(this.layoutOptions_,this.attrs_);Dygraph.update(this.layoutOptions_,this.user_attrs_);Dygraph.update(this.layoutOptions_,{errorBars:(this.attr_("errorBars")||this.attr_("customBars"))});this.layout_=new DygraphLayout(this,this.layoutOptions_);this.renderOptions_={colorScheme:this.colors_,strokeColor:null,axisLineWidth:Dygraph.AXIS_LINE_WIDTH};Dygraph.update(this.renderOptions_,this.attrs_);Dygraph.update(this.renderOptions_,this.user_attrs_);this.createStatusMessage_();this.createDragInterface_()};Dygraph.prototype.destroy=function(){var b=function(c){while(c.hasChildNodes()){b(c.firstChild);c.removeChild(c.firstChild)}};b(this.maindiv_);var a=function(c){for(var d in c){if(typeof(c[d])==="object"){c[d]=null}}};a(this.layout_);a(this.plotter_);a(this)};Dygraph.prototype.createPlotKitCanvas_=function(a){var b=Dygraph.createCanvas();b.style.position="absolute";b.style.top=a.style.top;b.style.left=a.style.left;b.width=this.width_;b.height=this.height_;b.style.width=this.width_+"px";b.style.height=this.height_+"px";return b};Dygraph.hsvToRGB=function(h,c,l){var d;var e;var k;if(c===0){d=l;e=l;k=l}else{var g=Math.floor(h*6);var j=(h*6)-g;var b=l*(1-c);var a=l*(1-(c*j));var m=l*(1-(c*(1-j)));switch(g){case 1:d=a;e=l;k=b;break;case 2:d=b;e=l;k=m;break;case 3:d=b;e=a;k=l;break;case 4:d=m;e=b;k=l;break;case 5:d=l;e=b;k=a;break;case 6:case 0:d=l;e=m;k=b;break}}d=Math.floor(255*d+0.5);e=Math.floor(255*e+0.5);k=Math.floor(255*k+0.5);return"rgb("+d+","+e+","+k+")"};Dygraph.prototype.setColors_=function(){var d=this.attr_("labels").length-1;this.colors_=[];var f=this.attr_("colors");if(!f){var a=this.attr_("colorSaturation")||1;var b=this.attr_("colorValue")||0.5;var j=Math.ceil(d/2);for(var c=1;c<=d;c++){if(!this.visibility()[c-1]){continue}var g=c%2?Math.ceil(c/2):(j+c/2);var e=(1*g/(1+d));this.colors_.push(Dygraph.hsvToRGB(e,a,b))}}else{for(var c=0;c<d;c++){if(!this.visibility()[c]){continue}var h=f[c%f.length];this.colors_.push(h)}}this.renderOptions_.colorScheme=this.colors_;Dygraph.update(this.plotter_.options,this.renderOptions_);Dygraph.update(this.layoutOptions_,this.user_attrs_);Dygraph.update(this.layoutOptions_,this.attrs_)};Dygraph.prototype.getColors=function(){return this.colors_};Dygraph.findPosX=function(a){var b=0;if(a.offsetParent){while(1){b+=a.offsetLeft;if(!a.offsetParent){break}a=a.offsetParent}}else{if(a.x){b+=a.x}}return b};Dygraph.findPosY=function(b){var a=0;if(b.offsetParent){while(1){a+=b.offsetTop;if(!b.offsetParent){break}b=b.offsetParent}}else{if(b.y){a+=b.y}}return a};Dygraph.prototype.createStatusMessage_=function(){var d=this.user_attrs_.labelsDiv;if(d&&null!=d&&(typeof(d)=="string"||d instanceof String)){this.user_attrs_.labelsDiv=document.getElementById(d)}if(!this.attr_("labelsDiv")){var a=this.attr_("labelsDivWidth");var c={position:"absolute",fontSize:"14px",zIndex:10,width:a+"px",top:"0px",left:(this.width_-a-2)+"px",background:"white",textAlign:"left",overflow:"hidden"};Dygraph.update(c,this.attr_("labelsDivStyles"));var e=document.createElement("div");for(var b in c){if(c.hasOwnProperty(b)){e.style[b]=c[b]}}this.graphDiv.appendChild(e);this.attrs_.labelsDiv=e}};Dygraph.prototype.positionLabelsDiv_=function(){if(this.user_attrs_.hasOwnProperty("labelsDiv")){return}var a=this.plotter_.area;var b=this.attr_("labelsDiv");b.style.left=a.x+a.w-this.attr_("labelsDivWidth")-1+"px"};Dygraph.prototype.createRollInterface_=function(){if(!this.roller_){this.roller_=document.createElement("input");this.roller_.type="text";this.roller_.style.display="none";this.graphDiv.appendChild(this.roller_)}var d=this.attr_("showRoller")?"block":"none";var b={position:"absolute",zIndex:10,top:(this.plotter_.area.h-25)+"px",left:(this.plotter_.area.x+1)+"px",display:d};this.roller_.size="2";this.roller_.value=this.rollPeriod_;for(var a in b){if(b.hasOwnProperty(a)){this.roller_.style[a]=b[a]}}var c=this;this.roller_.onchange=function(){c.adjustRoll(c.roller_.value)}};Dygraph.pageX=function(c){if(c.pageX){return(!c.pageX||c.pageX<0)?0:c.pageX}else{var d=document;var a=document.body;return c.clientX+(d.scrollLeft||a.scrollLeft)-(d.clientLeft||0)}};Dygraph.pageY=function(c){if(c.pageY){return(!c.pageY||c.pageY<0)?0:c.pageY}else{var d=document;var a=document.body;return c.clientY+(d.scrollTop||a.scrollTop)-(d.clientTop||0)}};Dygraph.prototype.dragGetX_=function(b,a){return Dygraph.pageX(b)-a.px};Dygraph.prototype.dragGetY_=function(b,a){return Dygraph.pageY(b)-a.py};Dygraph.startPan=function(f,e,b){b.isPanning=true;var h=e.xAxisRange();b.dateRange=h[1]-h[0];b.is2DPan=false;for(var a=0;a<e.axes_.length;a++){var c=e.axes_[a];var j=e.yAxisRange(a);c.dragValueRange=j[1]-j[0];var d=e.toDataCoords(null,b.dragStartY,a);c.draggingValue=d[1];if(c.valueWindow||c.valueRange){b.is2DPan=true}}b.draggingDate=(b.dragStartX/e.width_)*b.dateRange+h[0]};Dygraph.movePan=function(a,h,c){c.dragEndX=h.dragGetX_(a,c);c.dragEndY=h.dragGetY_(a,c);var e=c.draggingDate-(c.dragEndX/h.width_)*c.dateRange;var b=e+c.dateRange;h.dateWindow_=[e,b];if(c.is2DPan){var k=c.dragEndY/h.height_;for(var f=0;f<h.axes_.length;f++){var d=h.axes_[f];var j=d.draggingValue+k*d.dragValueRange;var l=j-d.dragValueRange;d.valueWindow=[l,j]}}h.drawGraph_()};Dygraph.endPan=function(c,b,a){a.isPanning=false;a.is2DPan=false;a.draggingDate=null;a.dateRange=null;a.valueRange=null};Dygraph.startZoom=function(c,b,a){a.isZooming=true};Dygraph.moveZoom=function(d,c,b){b.dragEndX=c.dragGetX_(d,b);b.dragEndY=c.dragGetY_(d,b);var e=Math.abs(b.dragStartX-b.dragEndX);var a=Math.abs(b.dragStartY-b.dragEndY);b.dragDirection=(e<a/2)?Dygraph.VERTICAL:Dygraph.HORIZONTAL;c.drawZoomRect_(b.dragDirection,b.dragStartX,b.dragEndX,b.dragStartY,b.dragEndY,b.prevDragDirection,b.prevEndX,b.prevEndY);b.prevEndX=b.dragEndX;b.prevEndY=b.dragEndY;b.prevDragDirection=b.dragDirection};Dygraph.endZoom=function(b,k,d){d.isZooming=false;d.dragEndX=k.dragGetX_(b,d);d.dragEndY=k.dragGetY_(b,d);var j=Math.abs(d.dragEndX-d.dragStartX);var l=Math.abs(d.dragEndY-d.dragStartY);if(j<2&&l<2&&k.lastx_!=undefined&&k.lastx_!=-1){if(k.attr_("clickCallback")!=null){k.attr_("clickCallback")(b,k.lastx_,k.selPoints_)}if(k.attr_("pointClickCallback")){var f=-1;var m=0;for(var h=0;h<k.selPoints_.length;h++){var c=k.selPoints_[h];var a=Math.pow(c.canvasx-d.dragEndX,2)+Math.pow(c.canvasy-d.dragEndY,2);if(f==-1||a<m){m=a;f=h}}var e=k.attr_("highlightCircleSize")+2;if(m<=5*5){k.attr_("pointClickCallback")(b,k.selPoints_[f])}}}if(j>=10&&d.dragDirection==Dygraph.HORIZONTAL){k.doZoomX_(Math.min(d.dragStartX,d.dragEndX),Math.max(d.dragStartX,d.dragEndX))}else{if(l>=10&&d.dragDirection==Dygraph.VERTICAL){k.doZoomY_(Math.min(d.dragStartY,d.dragEndY),Math.max(d.dragStartY,d.dragEndY))}else{k.canvas_.getContext("2d").clearRect(0,0,k.canvas_.width,k.canvas_.height)}}d.dragStartX=null;d.dragStartY=null};Dygraph.defaultInteractionModel={mousedown:function(c,b,a){a.initializeMouseDown(c,b,a);if(c.altKey||c.shiftKey){Dygraph.startPan(c,b,a)}else{Dygraph.startZoom(c,b,a)}},mousemove:function(c,b,a){if(a.isZooming){Dygraph.moveZoom(c,b,a)}else{if(a.isPanning){Dygraph.movePan(c,b,a)}}},mouseup:function(c,b,a){if(a.isZooming){Dygraph.endZoom(c,b,a)}else{if(a.isPanning){Dygraph.endPan(c,b,a)}}},mouseout:function(c,b,a){if(a.isZooming){a.dragEndX=null;a.dragEndY=null}},dblclick:function(c,b,a){if(c.altKey||c.shiftKey){return}b.doUnzoom_()}};Dygraph.DEFAULT_ATTRS.interactionModel=Dygraph.defaultInteractionModel;Dygraph.prototype.createDragInterface_=function(){var c={isZooming:false,isPanning:false,is2DPan:false,dragStartX:null,dragStartY:null,dragEndX:null,dragEndY:null,dragDirection:null,prevEndX:null,prevEndY:null,prevDragDirection:null,draggingDate:null,dateRange:null,px:0,py:0,initializeMouseDown:function(i,h,f){if(i.preventDefault){i.preventDefault()}else{i.returnValue=false;i.cancelBubble=true}f.px=Dygraph.findPosX(h.canvas_);f.py=Dygraph.findPosY(h.canvas_);f.dragStartX=h.dragGetX_(i,f);f.dragStartY=h.dragGetY_(i,f)}};var e=this.attr_("interactionModel");var b=this;var d=function(f){return function(g){f(g,b,c)}};for(var a in e){if(!e.hasOwnProperty(a)){continue}Dygraph.addEvent(this.mouseEventElement_,a,d(e[a]))}Dygraph.addEvent(document,"mouseup",function(g){if(c.isZooming||c.isPanning){c.isZooming=false;c.dragStartX=null;c.dragStartY=null}if(c.isPanning){c.isPanning=false;c.draggingDate=null;c.dateRange=null;for(var f=0;f<b.axes_.length;f++){delete b.axes_[f].draggingValue;delete b.axes_[f].dragValueRange}}})};Dygraph.prototype.drawZoomRect_=function(h,a,g,b,d,c,f,i){var e=this.canvas_.getContext("2d");if(c==Dygraph.HORIZONTAL){e.clearRect(Math.min(a,f),0,Math.abs(a-f),this.height_)}else{if(c==Dygraph.VERTICAL){e.clearRect(0,Math.min(b,i),this.width_,Math.abs(b-i))}}if(h==Dygraph.HORIZONTAL){if(g&&a){e.fillStyle="rgba(128,128,128,0.33)";e.fillRect(Math.min(a,g),0,Math.abs(g-a),this.height_)}}if(h==Dygraph.VERTICAL){if(d&&b){e.fillStyle="rgba(128,128,128,0.33)";e.fillRect(0,Math.min(b,d),this.width_,Math.abs(d-b))}}};Dygraph.prototype.doZoomX_=function(d,a){var b=this.toDataCoords(d,null);var c=b[0];b=this.toDataCoords(a,null);var e=b[0];this.doZoomXDates_(c,e)};Dygraph.prototype.doZoomXDates_=function(a,b){this.dateWindow_=[a,b];this.drawGraph_();if(this.attr_("zoomCallback")){this.attr_("zoomCallback")(a,b,this.yAxisRanges())}};Dygraph.prototype.doZoomY_=function(g,d){var e=[];for(var c=0;c<this.axes_.length;c++){var b=this.toDataCoords(null,g,c);var a=this.toDataCoords(null,d,c);this.axes_[c].valueWindow=[a[1],b[1]];e.push([a[1],b[1]])}this.drawGraph_();if(this.attr_("zoomCallback")){var f=this.xAxisRange();this.attr_("zoomCallback")(f[0],f[1],this.yAxisRanges())}};Dygraph.prototype.doUnzoom_=function(){var b=false;if(this.dateWindow_!=null){b=true;this.dateWindow_=null}for(var a=0;a<this.axes_.length;a++){if(this.axes_[a].valueWindow!=null){b=true;delete this.axes_[a].valueWindow}}if(b){this.drawGraph_();if(this.attr_("zoomCallback")){var c=this.rawData_[0][0];var d=this.rawData_[this.rawData_.length-1][0];this.attr_("zoomCallback")(c,d,this.yAxisRanges())}}};Dygraph.prototype.mouseMove_=function(b){var a=Dygraph.pageX(b)-Dygraph.findPosX(this.mouseEventElement_);var t=this.layout_.points;var m=-1;var j=-1;var r=1e+100;var q=-1;for(var f=0;f<t.length;f++){var o=t[f];if(o==null){continue}var h=Math.abs(o.canvasx-a);if(h>r){continue}r=h;q=f}if(q>=0){m=t[q].xval}var s=t[t.length-1];if(s!=null&&a>s.canvasx){m=t[t.length-1].xval}this.selPoints_=[];var d=t.length;if(!this.attr_("stackedGraph")){for(var f=0;f<d;f++){if(t[f].xval==m){this.selPoints_.push(t[f])}}}else{var g=0;for(var f=d-1;f>=0;f--){if(t[f].xval==m){var c={};for(var e in t[f]){c[e]=t[f][e]}c.yval-=g;g+=c.yval;this.selPoints_.push(c)}}this.selPoints_.reverse()}if(this.attr_("highlightCallback")){var n=this.lastx_;if(n!==null&&m!=n){this.attr_("highlightCallback")(b,m,this.selPoints_,this.idxToRow_(q))}}this.lastx_=m;this.updateSelection_()};Dygraph.prototype.idxToRow_=function(a){if(a<0){return -1}for(var b in this.layout_.datasets){if(a<this.layout_.datasets[b].length){return this.boundaryIds_[0][0]+a}a-=this.layout_.datasets[b].length}return -1};Dygraph.prototype.updateSelection_=function(){var q=this.canvas_.getContext("2d");if(this.previousVerticalX_>=0){var h=0;var e=this.attr_("labels");for(var f=1;f<e.length;f++){var b=this.attr_("highlightCircleSize",e[f]);if(b>h){h=b}}var o=this.previousVerticalX_;q.clearRect(o-h-1,0,2*h+2,this.height_)}var p=function(c){return c&&!isNaN(c)};if(this.selPoints_.length>0){var a=this.selPoints_[0].canvasx;var d=this.attr_("xValueFormatter")(this.lastx_,this)+":";var g=this.attr_("yValueFormatter");var m=this.colors_.length;if(this.attr_("showLabelsOnHighlight")){for(var f=0;f<this.selPoints_.length;f++){if(!this.attr_("labelsShowZeroValues")&&this.selPoints_[f].yval==0){continue}if(!p(this.selPoints_[f].canvasy)){continue}if(this.attr_("labelsSeparateLines")){d+="<br/>"}var n=this.selPoints_[f];var l=new RGBColor(this.plotter_.colors[n.name]);var j=g(n.yval);d+=" <b><font color='"+l.toHex()+"'>"+n.name+"</font></b>:"+j}this.attr_("labelsDiv").innerHTML=d}q.save();for(var f=0;f<this.selPoints_.length;f++){if(!p(this.selPoints_[f].canvasy)){continue}var k=this.attr_("highlightCircleSize",this.selPoints_[f].name);q.beginPath();q.fillStyle=this.plotter_.colors[this.selPoints_[f].name];q.arc(a,this.selPoints_[f].canvasy,k,0,2*Math.PI,false);q.fill()}q.restore();this.previousVerticalX_=a}};Dygraph.prototype.setSelection=function(c){this.selPoints_=[];var d=0;if(c!==false){c=c-this.boundaryIds_[0][0]}if(c!==false&&c>=0){for(var b in this.layout_.datasets){if(c<this.layout_.datasets[b].length){var a=this.layout_.points[d+c];if(this.attr_("stackedGraph")){a=this.layout_.unstackPointAtIndex(d+c)}this.selPoints_.push(a)}d+=this.layout_.datasets[b].length}}if(this.selPoints_.length){this.lastx_=this.selPoints_[0].xval;this.updateSelection_()}else{this.lastx_=-1;this.clearSelection()}};Dygraph.prototype.mouseOut_=function(a){if(this.attr_("unhighlightCallback")){this.attr_("unhighlightCallback")(a)}if(this.attr_("hideOverlayOnMouseOut")){this.clearSelection()}};Dygraph.prototype.clearSelection=function(){var a=this.canvas_.getContext("2d");a.clearRect(0,0,this.width_,this.height_);this.attr_("labelsDiv").innerHTML="";this.selPoints_=[];this.lastx_=-1};Dygraph.prototype.getSelection=function(){if(!this.selPoints_||this.selPoints_.length<1){return -1}for(var a=0;a<this.layout_.points.length;a++){if(this.layout_.points[a].x==this.selPoints_[0].x){return a+this.boundaryIds_[0][0]}}return -1};Dygraph.zeropad=function(a){if(a<10){return"0"+a}else{return""+a}};Dygraph.hmsString_=function(a){var b=Dygraph.zeropad;var c=new Date(a);if(c.getSeconds()){return b(c.getHours())+":"+b(c.getMinutes())+":"+b(c.getSeconds())}else{return b(c.getHours())+":"+b(c.getMinutes())}};Dygraph.dateAxisFormatter=function(b,c){if(c>=Dygraph.DECADAL){return b.strftime("%Y")}else{if(c>=Dygraph.MONTHLY){return b.strftime("%b %y")}else{var a=b.getHours()*3600+b.getMinutes()*60+b.getSeconds()+b.getMilliseconds();if(a==0||c>=Dygraph.DAILY){return new Date(b.getTime()+3600*1000).strftime("%d%b")}else{return Dygraph.hmsString_(b.getTime())}}}};Dygraph.dateString_=function(b,j){var c=Dygraph.zeropad;var g=new Date(b);var h=""+g.getFullYear();var f=c(g.getMonth()+1);var i=c(g.getDate());var e="";var a=g.getHours()*3600+g.getMinutes()*60+g.getSeconds();if(a){e=" "+Dygraph.hmsString_(b)}return h+"/"+f+"/"+i+e};Dygraph.round_=function(b,c){var a=Math.pow(10,c);return Math.round(b*a)/a};Dygraph.prototype.loadedEvent_=function(a){this.rawData_=this.parseCSV_(a);this.predraw_()};Dygraph.prototype.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Dygraph.prototype.quarters=["Jan","Apr","Jul","Oct"];Dygraph.prototype.addXTicks_=function(){var b,c;if(this.dateWindow_){b=this.dateWindow_[0];c=this.dateWindow_[1]}else{b=this.rawData_[0][0];c=this.rawData_[this.rawData_.length-1][0]}var a=this.attr_("xTicker")(b,c,this);this.layout_.updateOptions({xTicks:a})};Dygraph.SECONDLY=0;Dygraph.TWO_SECONDLY=1;Dygraph.FIVE_SECONDLY=2;Dygraph.TEN_SECONDLY=3;Dygraph.THIRTY_SECONDLY=4;Dygraph.MINUTELY=5;Dygraph.TWO_MINUTELY=6;Dygraph.FIVE_MINUTELY=7;Dygraph.TEN_MINUTELY=8;Dygraph.THIRTY_MINUTELY=9;Dygraph.HOURLY=10;Dygraph.TWO_HOURLY=11;Dygraph.SIX_HOURLY=12;Dygraph.DAILY=13;Dygraph.WEEKLY=14;Dygraph.MONTHLY=15;Dygraph.QUARTERLY=16;Dygraph.BIANNUAL=17;Dygraph.ANNUAL=18;Dygraph.DECADAL=19;Dygraph.CENTENNIAL=20;Dygraph.NUM_GRANULARITIES=21;Dygraph.SHORT_SPACINGS=[];Dygraph.SHORT_SPACINGS[Dygraph.SECONDLY]=1000*1;Dygraph.SHORT_SPACINGS[Dygraph.TWO_SECONDLY]=1000*2;Dygraph.SHORT_SPACINGS[Dygraph.FIVE_SECONDLY]=1000*5;Dygraph.SHORT_SPACINGS[Dygraph.TEN_SECONDLY]=1000*10;Dygraph.SHORT_SPACINGS[Dygraph.THIRTY_SECONDLY]=1000*30;Dygraph.SHORT_SPACINGS[Dygraph.MINUTELY]=1000*60;Dygraph.SHORT_SPACINGS[Dygraph.TWO_MINUTELY]=1000*60*2;Dygraph.SHORT_SPACINGS[Dygraph.FIVE_MINUTELY]=1000*60*5;Dygraph.SHORT_SPACINGS[Dygraph.TEN_MINUTELY]=1000*60*10;Dygraph.SHORT_SPACINGS[Dygraph.THIRTY_MINUTELY]=1000*60*30;Dygraph.SHORT_SPACINGS[Dygraph.HOURLY]=1000*3600;Dygraph.SHORT_SPACINGS[Dygraph.TWO_HOURLY]=1000*3600*2;Dygraph.SHORT_SPACINGS[Dygraph.SIX_HOURLY]=1000*3600*6;Dygraph.SHORT_SPACINGS[Dygraph.DAILY]=1000*86400;Dygraph.SHORT_SPACINGS[Dygraph.WEEKLY]=1000*604800;Dygraph.prototype.NumXTicks=function(c,d,h){if(h<Dygraph.MONTHLY){var f=Dygraph.SHORT_SPACINGS[h];return Math.floor(0.5+1*(d-c)/f)}else{var g=1;var e=12;if(h==Dygraph.QUARTERLY){e=3}if(h==Dygraph.BIANNUAL){e=2}if(h==Dygraph.ANNUAL){e=1}if(h==Dygraph.DECADAL){e=1;g=10}if(h==Dygraph.CENTENNIAL){e=1;g=100}var b=365.2524*24*3600*1000;var a=1*(d-c)/b;return Math.floor(0.5+1*a*e/g)}};Dygraph.prototype.GetXAxis=function(w,h,a){var p=this.attr_("xAxisLabelFormatter");var y=[];if(a<Dygraph.MONTHLY){var c=Dygraph.SHORT_SPACINGS[a];var q="%d%b";var s=c/1000;var u=new Date(w);if(s<=60){var f=u.getSeconds();u.setSeconds(f-f%s)}else{u.setSeconds(0);s/=60;if(s<=60){var f=u.getMinutes();u.setMinutes(f-f%s)}else{u.setMinutes(0);s/=60;if(s<=24){var f=u.getHours();u.setHours(f-f%s)}else{u.setHours(0);s/=24;if(s==7){u.setDate(u.getDate()-u.getDay())}}}}w=u.getTime();for(var k=w;k<=h;k+=c){y.push({v:k,label:p(new Date(k),a)})}}else{var b;var v=1;if(a==Dygraph.MONTHLY){b=[0,1,2,3,4,5,6,7,8,9,10,11,12]}else{if(a==Dygraph.QUARTERLY){b=[0,3,6,9]}else{if(a==Dygraph.BIANNUAL){b=[0,6]}else{if(a==Dygraph.ANNUAL){b=[0]}else{if(a==Dygraph.DECADAL){b=[0];v=10}else{if(a==Dygraph.CENTENNIAL){b=[0];v=100}else{this.warn("Span of dates is too long")}}}}}}var r=new Date(w).getFullYear();var m=new Date(h).getFullYear();var e=Dygraph.zeropad;for(var o=r;o<=m;o++){if(o%v!=0){continue}for(var n=0;n<b.length;n++){var l=o+"/"+e(1+b[n])+"/01";var k=Date.parse(l);if(k<w||k>h){continue}y.push({v:k,label:p(new Date(k),a)})}}}return y};Dygraph.dateTicker=function(e,f,b){var d=-1;for(var c=0;c<Dygraph.NUM_GRANULARITIES;c++){var a=b.NumXTicks(e,f,c);if(b.width_/a>=b.attr_("pixelsPerXLabel")){d=c;break}}if(d>=0){return b.GetXAxis(e,f,d)}else{}};Dygraph.numericTicks=function(z,y,o,b,h){var q=function(i){if(b&&b.hasOwnProperty(i)){return b[i]}return o.attr_(i)};var A=[];if(h){for(var v=0;v<h.length;v++){A.push({v:h[v]})}}else{if(q("labelsKMG2")){var f=[1,2,4,8]}else{var f=[1,2,5]}var B,r,g,w;var m=q("pixelsPerYLabel");for(var v=-10;v<50;v++){if(q("labelsKMG2")){var d=Math.pow(16,v)}else{var d=Math.pow(10,v)}for(var t=0;t<f.length;t++){B=d*f[t];r=Math.floor(z/B)*B;g=Math.ceil(y/B)*B;w=Math.abs(g-r)/B;var c=o.height_/w;if(c>m){break}}if(c>m){break}}if(r>g){B*=-1}for(var v=0;v<w;v++){var l=r+v*B;A.push({v:l})}}var s;var x=[];if(q("labelsKMB")){s=1000;x=["K","M","B","T"]}if(q("labelsKMG2")){if(s){o.warn("Setting both labelsKMB and labelsKMG2. Pick one!")}s=1024;x=["k","M","G","T"]}var u=q("yAxisLabelFormatter")?q("yAxisLabelFormatter"):q("yValueFormatter");for(var v=0;v<A.length;v++){var l=A[v].v;var a=Math.abs(l);var e;if(u!=undefined){e=u(l)}else{e=Dygraph.round_(l,2)}if(x.length){var p=s*s*s*s;for(var t=3;t>=0;t--,p/=s){if(a>=p){e=Dygraph.round_(l/p,1)+x[t];break}}}A[v].label=e}return A};Dygraph.prototype.extremeValues_=function(d){var h=null,f=null;var b=this.attr_("errorBars")||this.attr_("customBars");if(b){for(var c=0;c<d.length;c++){var g=d[c][1][0];if(!g){continue}var a=g-d[c][1][1];var e=g+d[c][1][2];if(a>g){a=g}if(e<g){e=g}if(f==null||e>f){f=e}if(h==null||a<h){h=a}}}else{for(var c=0;c<d.length;c++){var g=d[c][1];if(g===null||isNaN(g)){continue}if(f==null||g>f){f=g}if(h==null||g<h){h=g}}}return[h,f]};Dygraph.prototype.predraw_=function(){this.computeYAxes_();if(this.plotter_){this.plotter_.clear()}this.plotter_=new DygraphCanvasRenderer(this,this.hidden_,this.layout_,this.renderOptions_);this.createRollInterface_();this.positionLabelsDiv_();this.drawGraph_()};Dygraph.prototype.drawGraph_=function(){var E=this.rawData_;var D=this.is_initial_draw_;this.is_initial_draw_=false;var z=null,y=null;this.layout_.removeAllDatasets();this.setColors_();this.attrs_.pointSize=0.5*this.attr_("highlightCircleSize");var d=[];var f=[];var m={};for(var w=E[0].length-1;w>=1;w--){if(!this.visibility()[w-1]){continue}var s=this.attr_("labels")[w];var b=this.attr_("connectSeparatedPoints",w);var a=[];for(var t=0;t<E.length;t++){if(E[t][w]!=null||!b){var A=E[t][0];a.push([A,E[t][w]])}}a=this.rollingAverage(a,this.rollPeriod_);var p=this.attr_("errorBars")||this.attr_("customBars");if(this.dateWindow_){var F=this.dateWindow_[0];var g=this.dateWindow_[1];var B=[];var e=null,n=null;for(var r=0;r<a.length;r++){if(a[r][0]>=F&&e===null){e=r}if(a[r][0]<=g){n=r}}if(e===null){e=0}if(e>0){e--}if(n===null){n=a.length-1}if(n<a.length-1){n++}this.boundaryIds_[w-1]=[e,n];for(var r=e;r<=n;r++){B.push(a[r])}a=B}else{this.boundaryIds_[w-1]=[0,a.length-1]}var C=this.extremeValues_(a);if(p){for(var t=0;t<a.length;t++){val=[a[t][0],a[t][1][0],a[t][1][1],a[t][1][2]];a[t]=val}}else{if(this.attr_("stackedGraph")){var q=a.length;var o;for(var t=0;t<q;t++){var h=a[t][0];if(d[h]===undefined){d[h]=0}o=a[t][1];d[h]+=o;a[t]=[h,d[h]];if(d[h]>C[1]){C[1]=d[h]}if(d[h]<C[0]){C[0]=d[h]}}}}m[s]=C;f[w]=a}for(var w=1;w<f.length;w++){if(!this.visibility()[w-1]){continue}this.layout_.addDataset(this.attr_("labels")[w],f[w])}var v=this.computeYAxisRanges_(m);var u=v[0];var c=v[1];this.layout_.updateOptions({yAxes:u,seriesToAxisMap:c});this.addXTicks_();this.layout_.updateOptions({dateWindow:this.dateWindow_});this.layout_.evaluateWithError();this.plotter_.clear();this.plotter_.render();this.canvas_.getContext("2d").clearRect(0,0,this.canvas_.width,this.canvas_.height);if(this.attr_("drawCallback")!==null){this.attr_("drawCallback")(this,D)}};Dygraph.prototype.computeYAxes_=function(){this.axes_=[{}];this.seriesToAxisMap_={};var c=this.attr_("labels");var e={};for(var h=1;h<c.length;h++){e[c[h]]=(h-1)}var f=["includeZero","valueRange","labelsKMB","labelsKMG2","pixelsPerYLabel","yAxisLabelWidth","axisLabelFontSize","axisTickSize"];for(var h=0;h<f.length;h++){var g=f[h];var m=this.attr_(g);if(m){this.axes_[0][g]=m}}for(var n in e){if(!e.hasOwnProperty(n)){continue}var d=this.attr_("axis",n);if(d==null){this.seriesToAxisMap_[n]=0;continue}if(typeof(d)=="object"){var a={};Dygraph.update(a,this.axes_[0]);Dygraph.update(a,{valueRange:null});Dygraph.update(a,d);this.axes_.push(a);this.seriesToAxisMap_[n]=this.axes_.length-1}}for(var n in e){if(!e.hasOwnProperty(n)){continue}var d=this.attr_("axis",n);if(typeof(d)=="string"){if(!this.seriesToAxisMap_.hasOwnProperty(d)){this.error("Series "+n+" wants to share a y-axis with series "+d+", which does not define its own axis.");return null}var j=this.seriesToAxisMap_[d];this.seriesToAxisMap_[n]=j}}var l={};var b=this.visibility();for(var h=1;h<c.length;h++){var o=c[h];if(b[h-1]){l[o]=this.seriesToAxisMap_[o]}}this.seriesToAxisMap_=l};Dygraph.prototype.numAxes=function(){var c=0;for(var b in this.seriesToAxisMap_){if(!this.seriesToAxisMap_.hasOwnProperty(b)){continue}var a=this.seriesToAxisMap_[b];if(a>c){c=a}}return 1+c};Dygraph.prototype.computeYAxisRanges_=function(k){var g=[];for(var b in this.seriesToAxisMap_){if(!this.seriesToAxisMap_.hasOwnProperty(b)){continue}var l=this.seriesToAxisMap_[b];while(g.length<=l){g.push([])}g[l].push(b)}for(var o=0;o<this.axes_.length;o++){var c=this.axes_[o];if(c.valueWindow){c.computedValueRange=[c.valueWindow[0],c.valueWindow[1]]}else{if(c.valueRange){c.computedValueRange=[c.valueRange[0],c.valueRange[1]]}else{var b=g[o];var t=Infinity;var r=-Infinity;for(var n=0;n<b.length;n++){t=Math.min(k[b[n]][0],t);r=Math.max(k[b[n]][1],r)}if(c.includeZero&&t>0){t=0}var p=r-t;if(p==0){p=r}var f=r+0.1*p;var m=t-0.1*p;if(!this.attr_("avoidMinZero")){if(m<0&&t>=0){m=0}if(f>0&&r<=0){f=0}}if(this.attr_("includeZero")){if(r<0){f=0}if(t>0){m=0}}c.computedValueRange=[m,f]}}if(o==0||c.independentTicks){c.ticks=Dygraph.numericTicks(c.computedValueRange[0],c.computedValueRange[1],this,c)}else{var a=this.axes_[0];var e=a.ticks;var d=a.computedValueRange[1]-a.computedValueRange[0];var u=c.computedValueRange[1]-c.computedValueRange[0];var h=[];for(var o=0;o<e.length;o++){var s=(e[o].v-a.computedValueRange[0])/d;var q=c.computedValueRange[0]+s*u;h.push(q)}c.ticks=Dygraph.numericTicks(c.computedValueRange[0],c.computedValueRange[1],this,c,h)}}return[this.axes_,this.seriesToAxisMap_]};Dygraph.prototype.rollingAverage=function(o,g){if(o.length<2){return o}var g=Math.min(g,o.length-1);var b=[];var t=this.attr_("sigma");if(this.fractions_){var h=0;var k=0;var e=100;for(var z=0;z<o.length;z++){h+=o[z][1][0];k+=o[z][1][1];if(z-g>=0){h-=o[z-g][1][0];k-=o[z-g][1][1]}var B=o[z][0];var v=k?h/k:0;if(this.attr_("errorBars")){if(this.wilsonInterval_){if(k){var s=v<0?0:v,u=k;var A=t*Math.sqrt(s*(1-s)/u+t*t/(4*u*u));var a=1+t*t/k;var F=(s+t*t/(2*k)-A)/a;var m=(s+t*t/(2*k)+A)/a;b[z]=[B,[s*e,(s-F)*e,(m-s)*e]]}else{b[z]=[B,[0,0,0]]}}else{var x=k?t*Math.sqrt(v*(1-v)/k):1;b[z]=[B,[e*v,e*x,e*x]]}}else{b[z]=[B,e*v]}}}else{if(this.attr_("customBars")){var F=0;var C=0;var m=0;var f=0;for(var z=0;z<o.length;z++){var E=o[z][1];var l=E[1];b[z]=[o[z][0],[l,l-E[0],E[2]-l]];if(l!=null&&!isNaN(l)){F+=E[0];C+=l;m+=E[2];f+=1}if(z-g>=0){var r=o[z-g];if(r[1][1]!=null&&!isNaN(r[1][1])){F-=r[1][0];C-=r[1][1];m-=r[1][2];f-=1}}b[z]=[o[z][0],[1*C/f,1*(C-F)/f,1*(m-C)/f]]}}else{var D=Math.min(g-1,o.length-2);if(!this.attr_("errorBars")){if(g==1){return o}for(var z=0;z<o.length;z++){var c=0;var q=0;for(var w=Math.max(0,z-g+1);w<z+1;w++){var l=o[w][1];if(l==null||isNaN(l)){continue}q++;c+=o[w][1]}if(q){b[z]=[o[z][0],c/q]}else{b[z]=[o[z][0],null]}}}else{for(var z=0;z<o.length;z++){var c=0;var d=0;var q=0;for(var w=Math.max(0,z-g+1);w<z+1;w++){var l=o[w][1][0];if(l==null||isNaN(l)){continue}q++;c+=o[w][1][0];d+=Math.pow(o[w][1][1],2)}if(q){var x=Math.sqrt(d)/q;b[z]=[o[z][0],[c/q,t*x,t*x]]}else{b[z]=[o[z][0],[null,null,null]]}}}}}return b};Dygraph.dateParser=function(b,a){var c;var e;if(b.search("-")!=-1){c=b.replace("-","/","g");while(c.search("-")!=-1){c=c.replace("-","/")}e=Date.parse(c)}else{if(b.length==8){c=b.substr(0,4)+"/"+b.substr(4,2)+"/"+b.substr(6,2);e=Date.parse(c)}else{e=Date.parse(b)}}if(!e||isNaN(e)){a.error("Couldn't parse "+b+" as a date")}return e};Dygraph.prototype.detectTypeFromString_=function(b){var a=false;if(b.indexOf("-")>=0||b.indexOf("/")>=0||isNaN(parseFloat(b))){a=true}else{if(b.length==8&&b>"19700101"&&b<"20371231"){a=true}}if(a){this.attrs_.xValueFormatter=Dygraph.dateString_;this.attrs_.xValueParser=Dygraph.dateParser;this.attrs_.xTicker=Dygraph.dateTicker;this.attrs_.xAxisLabelFormatter=Dygraph.dateAxisFormatter}else{this.attrs_.xValueFormatter=function(c){return c};this.attrs_.xValueParser=function(c){return parseFloat(c)};this.attrs_.xTicker=Dygraph.numericTicks;this.attrs_.xAxisLabelFormatter=this.attrs_.xValueFormatter}};Dygraph.prototype.parseCSV_=function(m){var n=[];var r=m.split("\n");var c=this.attr_("delimiter");if(r[0].indexOf(c)==-1&&r[0].indexOf("\t")>=0){c="\t"}var a=0;if(this.labelsFromCSV_){a=1;this.attrs_.labels=r[0].split(c)}var l=function(i){var j=parseFloat(i);return isFinite(j)?j:null};var f;var p=false;var g=this.attr_("labels").length;var b=false;for(var k=a;k<r.length;k++){var q=r[k];if(q.length==0){continue}if(q[0]=="#"){continue}var e=q.split(c);if(e.length<2){continue}var d=[];if(!p){this.detectTypeFromString_(e[0]);f=this.attr_("xValueParser");p=true}d[0]=f(e[0],this);if(this.fractions_){for(var h=1;h<e.length;h++){var o=e[h].split("/");d[h]=[l(o[0]),l(o[1])]}}else{if(this.attr_("errorBars")){for(var h=1;h<e.length;h+=2){d[(h+1)/2]=[l(e[h]),l(e[h+1])]}}else{if(this.attr_("customBars")){for(var h=1;h<e.length;h++){var o=e[h].split(";");d[h]=[l(o[0]),l(o[1]),l(o[2])]}}else{for(var h=1;h<e.length;h++){d[h]=l(e[h])}}}}if(n.length>0&&d[0]<n[n.length-1][0]){b=true}n.push(d);if(d.length!=g){this.error("Number of columns in line "+k+" ("+d.length+") does not agree with number of labels ("+g+") "+q)}}if(b){this.warn("CSV is out of order; order it correctly to speed loading.");n.sort(function(j,i){return j[0]-i[0]})}return n};Dygraph.prototype.parseArray_=function(b){if(b.length==0){this.error("Can't plot empty data set");return null}if(b[0].length==0){this.error("Data set cannot contain an empty row");return null}if(this.attr_("labels")==null){this.warn("Using default labels. Set labels explicitly via 'labels' in the options parameter");this.attrs_.labels=["X"];for(var a=1;a<b[0].length;a++){this.attrs_.labels.push("Y"+a)}}if(Dygraph.isDateLike(b[0][0])){this.attrs_.xValueFormatter=Dygraph.dateString_;this.attrs_.xAxisLabelFormatter=Dygraph.dateAxisFormatter;this.attrs_.xTicker=Dygraph.dateTicker;var c=Dygraph.clone(b);for(var a=0;a<b.length;a++){if(c[a].length==0){this.error("Row "+(1+a)+" of data is empty");return null}if(c[a][0]==null||typeof(c[a][0].getTime)!="function"||isNaN(c[a][0].getTime())){this.error("x value in row "+(1+a)+" is not a Date");return null}c[a][0]=c[a][0].getTime()}return c}else{this.attrs_.xValueFormatter=function(d){return d};this.attrs_.xTicker=Dygraph.numericTicks;return b}};Dygraph.prototype.parseDataTable_=function(u){var h=u.getNumberOfColumns();var g=u.getNumberOfRows();var c=u.getColumnType(0);if(c=="date"||c=="datetime"){this.attrs_.xValueFormatter=Dygraph.dateString_;this.attrs_.xValueParser=Dygraph.dateParser;this.attrs_.xTicker=Dygraph.dateTicker;this.attrs_.xAxisLabelFormatter=Dygraph.dateAxisFormatter}else{if(c=="number"){this.attrs_.xValueFormatter=function(i){return i};this.attrs_.xValueParser=function(i){return parseFloat(i)};this.attrs_.xTicker=Dygraph.numericTicks;this.attrs_.xAxisLabelFormatter=this.attrs_.xValueFormatter}else{this.error("only 'date', 'datetime' and 'number' types are supported for column 1 of DataTable input (Got '"+c+"')");return null}}var a=[];var t={};var o=false;for(var r=1;r<h;r++){var d=u.getColumnType(r);if(d=="number"){a.push(r)}else{if(d=="string"&&this.attr_("displayAnnotations")){var s=a[a.length-1];if(!t.hasOwnProperty(s)){t[s]=[r]}else{t[s].push(r)}o=true}else{this.error("Only 'number' is supported as a dependent type with Gviz. 'string' is only supported if displayAnnotations is true")}}}var m=[u.getColumnLabel(0)];for(var r=0;r<a.length;r++){m.push(u.getColumnLabel(a[r]));if(this.attr_("errorBars")){r+=1}}this.attrs_.labels=m;h=m.length;var v=[];var b=false;var l=[];for(var r=0;r<g;r++){var f=[];if(typeof(u.getValue(r,0))==="undefined"||u.getValue(r,0)===null){this.warn("Ignoring row "+r+" of DataTable because of undefined or null first column.");continue}if(c=="date"||c=="datetime"){f.push(u.getValue(r,0).getTime())}else{f.push(u.getValue(r,0))}if(!this.attr_("errorBars")){for(var p=0;p<a.length;p++){var e=a[p];f.push(u.getValue(r,e));if(o&&t.hasOwnProperty(e)&&u.getValue(r,t[e][0])!=null){var q={};q.series=u.getColumnLabel(e);q.xval=f[0];q.shortText=String.fromCharCode(65+l.length);q.text="";for(var n=0;n<t[e].length;n++){if(n){q.text+="\n"}q.text+=u.getValue(r,t[e][n])}l.push(q)}}}else{for(var p=0;p<h-1;p++){f.push([u.getValue(r,1+2*p),u.getValue(r,2+2*p)])}}if(v.length>0&&f[0]<v[v.length-1][0]){b=true}for(var p=0;p<f.length;p++){if(!isFinite(f[p])){f[p]=null}}v.push(f)}if(b){this.warn("DataTable is out of order; order it correctly to speed loading.");v.sort(function(j,i){return j[0]-i[0]})}this.rawData_=v;if(l.length>0){this.setAnnotations(l,true)}};Dygraph.update=function(b,c){if(typeof(c)!="undefined"&&c!==null){for(var a in c){if(c.hasOwnProperty(a)){b[a]=c[a]}}}return b};Dygraph.isArrayLike=function(b){var a=typeof(b);if((a!="object"&&!(a=="function"&&typeof(b.item)=="function"))||b===null||typeof(b.length)!="number"||b.nodeType===3){return false}return true};Dygraph.isDateLike=function(a){if(typeof(a)!="object"||a===null||typeof(a.getTime)!="function"){return false}return true};Dygraph.clone=function(c){var b=[];for(var a=0;a<c.length;a++){if(Dygraph.isArrayLike(c[a])){b.push(Dygraph.clone(c[a]))}else{b.push(c[a])}}return b};Dygraph.prototype.start_=function(){if(typeof this.file_=="function"){this.loadedEvent_(this.file_())}else{if(Dygraph.isArrayLike(this.file_)){this.rawData_=this.parseArray_(this.file_);this.predraw_()}else{if(typeof this.file_=="object"&&typeof this.file_.getColumnRange=="function"){this.parseDataTable_(this.file_);this.predraw_()}else{if(typeof this.file_=="string"){if(this.file_.indexOf("\n")>=0){this.loadedEvent_(this.file_)}else{var b=new XMLHttpRequest();var a=this;b.onreadystatechange=function(){if(b.readyState==4){if(b.status==200){a.loadedEvent_(b.responseText)}}};b.open("GET",this.file_,true);b.send(null)}}else{this.error("Unknown data format: "+(typeof this.file_))}}}}};Dygraph.prototype.updateOptions=function(a){if("rollPeriod" in a){this.rollPeriod_=a.rollPeriod}if("dateWindow" in a){this.dateWindow_=a.dateWindow}Dygraph.update(this.user_attrs_,a);Dygraph.update(this.renderOptions_,a);this.labelsFromCSV_=(this.attr_("labels")==null);this.layout_.updateOptions({errorBars:this.attr_("errorBars")});if(a.file){this.file_=a.file;this.start_()}else{this.predraw_()}};Dygraph.prototype.resize=function(a,b){if(this.resize_lock){return}this.resize_lock=true;if((a===null)!=(b===null)){this.warn("Dygraph.resize() should be called with zero parameters or two non-NULL parameters. Pretending it was zero.");a=b=null}this.maindiv_.innerHTML="";this.attrs_.labelsDiv=null;if(a){this.maindiv_.style.width=a+"px";this.maindiv_.style.height=b+"px";this.width_=a;this.height_=b}else{this.width_=this.maindiv_.offsetWidth;this.height_=this.maindiv_.offsetHeight}this.createInterface_();this.predraw_();this.resize_lock=false};Dygraph.prototype.adjustRoll=function(a){this.rollPeriod_=a;this.predraw_()};Dygraph.prototype.visibility=function(){if(!this.attr_("visibility")){this.attrs_.visibility=[]}while(this.attr_("visibility").length<this.rawData_[0].length-1){this.attr_("visibility").push(true)}return this.attr_("visibility")};Dygraph.prototype.setVisibility=function(b,c){var a=this.visibility();if(b<0||b>=a.length){this.warn("invalid series number in setVisibility: "+b)}else{a[b]=c;this.predraw_()}};Dygraph.prototype.setAnnotations=function(b,a){Dygraph.addAnnotationRule();this.annotations_=b;this.layout_.setAnnotations(this.annotations_);if(!a){this.predraw_()}};Dygraph.prototype.annotations=function(){return this.annotations_};Dygraph.prototype.indexFromSetName=function(a){var c=this.attr_("labels");for(var b=0;b<c.length;b++){if(c[b]==a){return b}}return null};Dygraph.addAnnotationRule=function(){if(Dygraph.addedAnnotationCSS){return}var f="border: 1px solid black; background-color: white; text-align: center;";var e=document.createElement("style");e.type="text/css";document.getElementsByTagName("head")[0].appendChild(e);for(var b=0;b<document.styleSheets.length;b++){if(document.styleSheets[b].disabled){continue}var d=document.styleSheets[b];try{if(d.insertRule){var a=d.cssRules?d.cssRules.length:0;d.insertRule(".dygraphDefaultAnnotation { "+f+" }",a)}else{if(d.addRule){d.addRule(".dygraphDefaultAnnotation",f)}}Dygraph.addedAnnotationCSS=true;return}catch(c){}}this.warn("Unable to add default annotation CSS rule; display may be off.")};Dygraph.createCanvas=function(){var a=document.createElement("canvas");isIE=(/MSIE/.test(navigator.userAgent)&&!window.opera);if(isIE&&(typeof(G_vmlCanvasManager)!="undefined")){a=G_vmlCanvasManager.initElement(a)}return a};Dygraph.GVizChart=function(a){this.container=a};Dygraph.GVizChart.prototype.draw=function(b,a){this.container.innerHTML="";if(typeof(this.date_graph)!="undefined"){this.date_graph.destroy()}this.date_graph=new Dygraph(this.container,b,a)};Dygraph.GVizChart.prototype.setSelection=function(a){var b=false;if(a.length){b=a[0].row}this.date_graph.setSelection(b)};Dygraph.GVizChart.prototype.getSelection=function(){var a=[];var c=this.date_graph.getSelection();if(c<0){return a}col=1;for(var b in this.date_graph.layout_.datasets){a.push({row:c,column:col});col++}return a};DateGraph=Dygraph;function RGBColor(a){this.ok=false;if(a.charAt(0)=="#"){a=a.substr(1,6)}a=a.replace(/ /g,"");a=a.toLowerCase();var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var e in c){if(a==e){a=c[e]}}var h=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(i){return[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(i){return[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(i){return[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]}}];for(var d=0;d<h.length;d++){var f=h[d].re;var b=h[d].process;var g=f.exec(a);if(g){channels=b(g);this.r=channels[0];this.g=channels[1];this.b=channels[2];this.ok=true}}this.r=(this.r<0||isNaN(this.r))?0:((this.r>255)?255:this.r);this.g=(this.g<0||isNaN(this.g))?0:((this.g>255)?255:this.g);this.b=(this.b<0||isNaN(this.b))?0:((this.b>255)?255:this.b);this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var k=this.r.toString(16);var j=this.g.toString(16);var i=this.b.toString(16);if(k.length==1){k="0"+k}if(j.length==1){j="0"+j}if(i.length==1){i="0"+i}return"#"+k+j+i}}Date.ext={};Date.ext.util={};Date.ext.util.xPad=function(a,c,b){if(typeof(b)=="undefined"){b=10}for(;parseInt(a,10)<b&&b>1;b/=10){a=c.toString()+a}return a.toString()};Date.prototype.locale="en-GB";if(document.getElementsByTagName("html")&&document.getElementsByTagName("html")[0].lang){Date.prototype.locale=document.getElementsByTagName("html")[0].lang}Date.ext.locales={};Date.ext.locales.en={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],x:"%d/%m/%y",X:"%T"};Date.ext.locales["en-US"]=Date.ext.locales.en;Date.ext.locales["en-US"].c="%a %d %b %Y %r %Z";Date.ext.locales["en-US"].x="%D";Date.ext.locales["en-US"].X="%r";Date.ext.locales["en-GB"]=Date.ext.locales.en;Date.ext.locales["en-AU"]=Date.ext.locales["en-GB"];Date.ext.formats={a:function(a){return Date.ext.locales[a.locale].a[a.getDay()]},A:function(a){return Date.ext.locales[a.locale].A[a.getDay()]},b:function(a){return Date.ext.locales[a.locale].b[a.getMonth()]},B:function(a){return Date.ext.locales[a.locale].B[a.getMonth()]},c:"toLocaleString",C:function(a){return Date.ext.util.xPad(parseInt(a.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(a){return Date.ext.util.xPad(parseInt(Date.ext.util.G(a)/100,10),0)},G:function(c){var e=c.getFullYear();var b=parseInt(Date.ext.formats.V(c),10);var a=parseInt(Date.ext.formats.W(c),10);if(a>b){e++}else{if(a===0&&b>=52){e--}}return e},H:["getHours","0"],I:function(b){var a=b.getHours()%12;return Date.ext.util.xPad(a===0?12:a,0)},j:function(c){var a=c-new Date(""+c.getFullYear()+"/1/1 GMT");a+=c.getTimezoneOffset()*60000;var b=parseInt(a/60000/60/24,10)+1;return Date.ext.util.xPad(b,0,100)},m:function(a){return Date.ext.util.xPad(a.getMonth()+1,0)},M:["getMinutes","0"],p:function(a){return Date.ext.locales[a.locale].p[a.getHours()>=12?1:0]},P:function(a){return Date.ext.locales[a.locale].P[a.getHours()>=12?1:0]},S:["getSeconds","0"],u:function(a){var b=a.getDay();return b===0?7:b},U:function(e){var a=parseInt(Date.ext.formats.j(e),10);var c=6-e.getDay();var b=parseInt((a+c)/7,10);return Date.ext.util.xPad(b,0)},V:function(e){var c=parseInt(Date.ext.formats.W(e),10);var b=(new Date(""+e.getFullYear()+"/1/1")).getDay();var a=c+(b>4||b<=1?0:1);if(a==53&&(new Date(""+e.getFullYear()+"/12/31")).getDay()<4){a=1}else{if(a===0){a=Date.ext.formats.V(new Date(""+(e.getFullYear()-1)+"/12/31"))}}return Date.ext.util.xPad(a,0)},w:"getDay",W:function(e){var a=parseInt(Date.ext.formats.j(e),10);var c=7-Date.ext.formats.u(e);var b=parseInt((a+c)/7,10);return Date.ext.util.xPad(b,0,10)},y:function(a){return Date.ext.util.xPad(a.getFullYear()%100,0)},Y:"getFullYear",z:function(c){var b=c.getTimezoneOffset();var a=Date.ext.util.xPad(parseInt(Math.abs(b/60),10),0);var e=Date.ext.util.xPad(b%60,0);return(b>0?"-":"+")+a+e},Z:function(a){return a.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(a){return"%"}};Date.ext.aggregates={c:"locale",D:"%m/%d/%y",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"};Date.ext.aggregates.z=Date.ext.formats.z(new Date());Date.ext.aggregates.Z=Date.ext.formats.Z(new Date());Date.ext.unsupported={};Date.prototype.strftime=function(a){if(!(this.locale in Date.ext.locales)){if(this.locale.replace(/-[a-zA-Z]+$/,"") in Date.ext.locales){this.locale=this.locale.replace(/-[a-zA-Z]+$/,"")}else{this.locale="en-GB"}}var c=this;while(a.match(/%[cDhnrRtTxXzZ]/)){a=a.replace(/%([cDhnrRtTxXzZ])/g,function(e,d){var g=Date.ext.aggregates[d];return(g=="locale"?Date.ext.locales[c.locale][d]:g)})}var b=a.replace(/%([aAbBCdegGHIjmMpPSuUVwWyY%])/g,function(e,d){var g=Date.ext.formats[d];if(typeof(g)=="string"){return c[g]()}else{if(typeof(g)=="function"){return g.call(c,c)}else{if(typeof(g)=="object"&&typeof(g[0])=="string"){return Date.ext.util.xPad(c[g[0]](),g[1])}else{return d}}}});c=null;return b};